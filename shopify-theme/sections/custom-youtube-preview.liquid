{% comment %}
  ============================================
  YouTube Preview (Homepage â€” multiple thumbnails)
  Paste into: sections/custom-youtube-preview.liquid
  Add video IDs as blocks in Theme Customizer
  ============================================
{% endcomment %}

<section class="yt-preview section-{{ section.id }}-padding">
  <div class="page-width">
    <div class="yt-preview__header">
      <h2>{{ section.settings.heading | default: 'Watch Us Create' }}</h2>
      {% if section.settings.view_all_url != blank %}
        <a href="{{ section.settings.view_all_url }}" class="yt-preview__view-all">View All Videos &rarr;</a>
      {% endif %}
    </div>
    <div class="yt-preview__grid">
      {% for block in section.blocks %}
        <div class="yt-preview__card" {{ block.shopify_attributes }}>
          <a href="https://www.youtube.com/watch?v={{ block.settings.video_id }}" target="_blank" rel="noopener">
            <div class="yt-preview__thumb">
              <img src="https://img.youtube.com/vi/{{ block.settings.video_id }}/hqdefault.jpg"
                   alt="{{ block.settings.title | escape }}"
                   loading="lazy"
                   width="480" height="360"
                   onerror="this.src='https://img.youtube.com/vi/{{ block.settings.video_id }}/mqdefault.jpg'">
              <div class="yt-preview__play">
                <svg width="52" height="36" viewBox="0 0 52 36" fill="none">
                  <rect width="52" height="36" rx="8" fill="rgba(0,0,0,0.7)"/>
                  <path d="M21 11v14l14-7-14-7z" fill="#fff"/>
                </svg>
              </div>
            </div>
            <h3 class="yt-preview__title">{{ block.settings.title }}</h3>
          </a>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<style>
  .yt-preview__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    flex-wrap: wrap;
    gap: 12px;
  }
  .yt-preview__header h2 {
    font-family: var(--font-heading-family, 'Trirong', serif);
    font-size: 2rem;
    font-weight: 300;
  }
  .yt-preview__view-all {
    font-size: 0.85rem;
    color: var(--color-foreground, #252525);
    opacity: 0.6;
    text-decoration: none;
    transition: opacity 0.3s;
  }
  .yt-preview__view-all:hover { opacity: 1; }
  .yt-preview__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
  }
  .yt-preview__card a {
    text-decoration: none;
    color: inherit;
  }
  .yt-preview__thumb {
    position: relative;
    aspect-ratio: 16/9;
    overflow: hidden;
    border-radius: 4px;
    background: #1a1a1a;
  }
  .yt-preview__thumb img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s;
  }
  .yt-preview__card:hover img { transform: scale(1.05); }
  .yt-preview__play {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    opacity: 0.85;
    transition: opacity 0.3s;
  }
  .yt-preview__card:hover .yt-preview__play { opacity: 1; }
  .yt-preview__title {
    font-size: 0.9rem;
    font-weight: 600;
    margin-top: 10px;
    line-height: 1.35;
  }
</style>

{% schema %}
{
  "name": "YouTube Preview",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Watch Us Create"
    },
    {
      "type": "url",
      "id": "view_all_url",
      "label": "View All Link",
      "info": "Link to your /pages/youtube page"
    }
  ],
  "blocks": [
    {
      "type": "video",
      "name": "Video",
      "settings": [
        {
          "type": "text",
          "id": "video_id",
          "label": "YouTube Video ID",
          "info": "The part after v= in the YouTube URL (e.g. dQw4w9WgXcQ)"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Video Title"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "YouTube Preview"
    }
  ]
}
{% endschema %}
